%
% Math Environements
%
% italic text
\newtheorem{theorem}{Theorem}[chapter]
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{lemma}[theorem]{Lemma}
% normal text
\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{example}[theorem]{Example}
\newtheorem{convention}[theorem]{Convention}

%
% General Mathematics
%
% natural numbers
\newcommand{\N}{\mathbb{N}}
% real numbers
\newcommand{\R}{\mathbb{R}}
\newcommand{\nonposR}{\R^-_0}
% rational numbers
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\nonposQ}{\Q^-_0}

% sets
\DeclarePairedDelimiter{\braces}{\{}{\}} % \braces* uses \left\right, but without space before
\renewcommand{\set}[1]{\braces*{#1}} % override def in malgebra.sty
% use as \Set{..\with ..},
% \Set*{..\with ..} to autostretch,
% \Set[\big]{..\with ..} to set size manually
\DeclarePairedDelimiterX\Set[1]\lbrace\rbrace{\def\with{\;\delimsize\vert\;}#1}
% FIXME: only use \Set

% compact interval [#1,#2]
\newcommand{\compactum}[2]{[#1,#2]}
% open interval
\newcommand{\open}[2]{(#1,#2)}
% left closed, right open interval
\newcommand{\closedopen}[2]{[#1,#2)}
% range
\newcommand{\range}[2]{#1,\ldots,#2}
% functions: f\from\R\to\R
\newcommand*{\from}{\colon}

% quantifiers
% FIXME: don't load lmeta.sty
% FIXME: quantifiers http://tex.stackexchange.com/questions/115432/best-practice-for-typesetting-quantifiers
\renewcommand{\mexists}[1]{\exists\mkern2mu #1}
\renewcommand{\mforall}[1]{\forall\mkern2mu #1}
\newcommand{\holds}{\mathrel{\colon}}
% define as
\newcommand{\assign}{\mathrel{{:}{=}}}
\renewcommand{\defeq}{\mathrel{\overset{\makebox[0pt]{\mbox{\normalfont\tiny def}}}{=}}}
% defined by
\newcommand\logeq{\mathrel{\vcentcolon\Longleftrightarrow}}
% norm
%\DeclarePairedDelimiter{\abs}{\lvert}{\rvert}
\DeclarePairedDelimiter{\nnorm}{\lVert}{\rVert}
\DeclarePairedDelimiter{\supnorm}{\lVert}{\rVert_{\sup}}%{\mathrm{\scriptsize{sup}}}}

% exponential function
\newcommand{\e}[1]{\mathrm{e}^{#1}}

%
% Linear Algebra
%

% column vector
\newcommand*\colvec[1]{
    \begin{pmatrix}#1\end{pmatrix}
}

%
% Analysis
%
% derivative: Lagrange style
%\newcommand{\D}[1]{#1'} % ' defined in latex and is same as \prime

% Differential (upface d)
\DeclareMathOperator{\dif}{d \!}

% derivative: Leibniz style
\renewcommand{\DD}[2]{\frac{\dif #1}{\dif #2}}
% differential in integral
\newcommand{\dx}[1][x]{\dif #1}
% integral
\newcommand{\integral}[2]{\int_{#1}^{#2}}
\newcommand{\denseintegral}[2]{\int_{#1}^{#2}\!\!}

\newcommand{\Cn}[3][]{C^{#1}\ifthenelse{\equal{#2}{}}{}{\ifthenelse{\equal{#3}{}}{(#2)}{(#2,#3)}}}
\newcommand{\Cnpw}[3][]{C_{\mkern-2mu\mathrm{pw}}^{#1}\ifthenelse{\equal{#2}{}}{}{\ifthenelse{\equal{#3}{}}{(#2)}{(#2,#3)}}}

%
% Delay Differential Equation
%
% definition domain of right hand side
\newcommand{\deff}{\R\times\R^n\times\ldots\times\R^n}
% trajectory
\newcommand{\trajectory}{\gamma}
\newcommand{\sampledtraj}[2][]{\hat{\trajectory}^{#1}_{#2}}
%
\newcommand{\tzero}{\sigma}
\newcommand{\taumax}{\tau_{\max}}%\mathrm{max}}
\newcommand{\taumin}{\tau_{\min}}

%
% Differential Dynamic Logic
%

% hybrid programs
\newcommand{\dHP}{\text{dHP}\xspace}%
\newcommand{\dHPs}{\text{dHPs}\xspace}%
% redefine notation for HP
\def\lprogramsname{\dHP}

% ddL
\newcommand{\ddL}{\textsf{d{\kern-0.07em}d{\kern-0.1em}$\mathcal{L}$}\xspace}
\newcommand{\ddLformulas}{\lformulasname_{\ddL}}
\newcommand{\ddLterms}{\ltermsname_{\ddL}}
\newcommand{\signature}{\Sigma}
\newcommand{\varsymbols}{V}
\newcommand{\terms}{\lterms{\signature}{\varsymbols}}
\newcommand{\FOLformulas}{\lformulas[\FOL]{\signature}{\varsymbols}}
\newcommand{\FOL}{\textnormal{FOL}\xspace}
\newcommand{\FOLR}{\textnormal{FOL}$_\R$\xspace}

% FIXME: use \mathcal{M}
\newcommand{\model}{M}
\newcommand{\interpret}[1][]{\ifthenelse{\equal{#1}{}}{I}{I(#1)}}
\newcommand{\universe}{D_{\model}}
\newcommand{\assignment}{\nu}
\newcommand{\ireachability}[2]{\rho\left(#2\right)}

%
% Delay Differential Dynamic Logic
%
% FIXME: \constants might need \mkern-2mu
\newcommand{\constants}[1][]{\mathcal{C}_{#1}}
\newcommand{\diffvars}{\D{\allvars}}
\newcommand{\delayvars}[1][]{\allvars[\constants[#1]]}
\newcommand{\delayvarswiths}{\allvars\times\constants\cup\set{s}}
\newcommand{\delaydiffvars}[1][]{\diffvars[\constants[#1]]}

% evolution domain constraint
\renewcommand{\ivr}{\asfmlfolR}
\renewcommand{\inv}{\bsfmlfolR}
% \newcommand{\csfml}{\varphi}

% formula of first-order real arithmetic
\newcommand{\asfmlfolR}{\chi}
\newcommand{\bsfmlfolR}{\varphi}

% propositions
\newcommand{\asprop}{p}
\newcommand{\bsprop}{q}

% sets of formulas
\newcommand{\asfmls}{\Gamma}
\newcommand{\bsfmls}{\Delta}
\newcommand{\csfmls}{\Theta}

% states
\newcommand{\states}{\mathcal{S}}
\newcommand{\asstate}{\nu}
\newcommand{\bsstate}{\omega}
\newcommand{\csstate}{\mu}

% partition of an interval
\newcommand{\partition}[3][]{
	\Set{#2<\ifthenelse{\equal{#1}{}}{}{#1<}\ldots<#3}}

%\newcommand{\delayinterval}[1][T]{[-#1,0]}
\newcommand{\closeddelayinterval}[1][-T]{\compactum{#1}{0}}
\newcommand{\delayinterval}[1][-T]{\closedopen{#1}{0}}
\newcommand{\hs}[2][-T]{\lforall{[#1)}{#2}}
\newcommand{\hsc}[2][-T]{\lforall{[#1]}{#2}}
\newcommand{\holdssince}[2][s]{\mforall{#1\in\delayinterval[#2]}\holds}
\newcommand{\holdssinceclosed}[3][s]{\lforall{#1\in\closeddelayinterval[#2]}{\left(#3\right)}}
\newcommand{\past}{r}
% FIXME: or D ?
\newcommand{\duration}{R}

\newcommand{\statespace}[1][-T]{\Cnpw[1]{\closeddelayinterval[#1]}{\R^n}}
%\newcommand{\statespacenew}[1][T]{\Cnpw[1]{\closeddelayinterval[#1]}{\R^n}}
%\newcommand{\xtau}[1][]{\ifthenelse{\equal{#1}{}}{x[\tau]}{x[#1]}}
\newcommand{\x}[1][]{x[#1]}
\newcommand{\Dx}[1][]{\D{x}[#1]}

\newcommand{\init}{\text{init}}
\newcommand{\ctrl}{\text{ctrl}}
\newcommand{\plant}{\text{plant}}
\newcommand{\req}{\text{req}}

%\newcommand{\xtau}[1][-\tau]{x[#1]}
%\newcommand{\Dxtau}[1][-\tau]{\D{x}[#1]}




% History Horizon
\DeclareMathOperator{\HHtrm}{HH_{\ltermsname}}
\DeclareMathOperator{\HHfml}{HH_{\lformulasname}}
\DeclareMathOperator{\HHprg}{HH_{\lprogramsname}}

% Deprecated
% FIXME: make sure not used any more
\newcommand{\xbartau}{\bar{x}_{\tau}}
\newcommand{\xbartaut}[1]{\bar{x}_{\tau,#1}}
