\chapter{Axiomatization and Proof Calculus}
\label{ch:axiomatization-proof-calculus}

Formulas of delay differential dynamic logic allow the specification of properties of hybrid programs with delay. Their truth value, whether a such formula is true or false, is determined by the semantics. However, finding the truth value only using the definition of the semantics is inpractical and tedious. As a more powerful means for this verification task, \ddL includes a proof calculus with rules based on axioms. These allow manipulations on a syntcatic level, without falling back on the semantics.
Moreover, they can be implemented in software for computer-aided verification.

\section{Axiomatization}
    \label{sec:axiomatization}

    % axioms: tautologies, syntactic transformation, equivalences

    % FIXME: correct source? \cite{Platzer12Complete,Platzer15Uniform}
    The axiomatization for \ddL presented here is based on the \dL axiomatization, as given in \cite{Platzer12Complete}.
    It is a first-order Hilbert calculus, using \emph{modus ponens} and \emph{$\forall$-generalization} as a basis.

    As opposed to an axiom schemata, which represents an infinte list of axioms by containing placeholders for concrete formulas and terms, we consider here for simplicity an axiom as a concrete formula.
    % FIXME: is s-formula allowed as axiom? or only without s?

    % FOLR or ddL formulas?
    all instances of valid formulas of first-order real arithmetic are allowed as axiom

    Similar to differential forms for \dL \cite{Platzer15Uniform}, we also consider a differential form axiomatization of differential equations.

    The goal of transforming a \ddL formula into another formula by appliying the axioms is to eventually derive a first-order formula of real arithmetic, which is decideable by \emph{quantifier elimination} ($\QE$).

    The axioms listed in Figure~\ref{fig:axioms} are expressed in $\dbox{\cdot}$. Axioms with the dual operator $\ddiamond{\cdot}$ can be obtained using the duality relation (axiom~\irref{diamond}).

    % TODO: what about [a;b]p. is [a][b]p correct?
    \begin{figure}[t]
        \begin{calculuscollections}{\textwidth}
        % axioms
        \begin{calculus}
            \cinferenceRule[diamond|$\didia{\cdot}$]{diamond axiom}{
                \linferenceRule[equiv]{
                    \lnot\dbox{\asprg}{\lnot\asfml(s)}
                }{
                    \ddiamond{\asprg}{\asfml(s)}
                }
            }{}
            % TODO: holds iff semantic of not is complement
            \cinferenceRule[testb|$\dibox{\htest{}}$]{test axiom}{
                \linferenceRule[equiv]{
                    \big(\bsfml(s)\limply\asfml(s)\big)
                }{
                    \dbox{\htest{\bsfml(s)}}{\asfml(s)}
                }
            }{}
            \cinferenceRule[assignb|$\dibox{\assign}$]{assignment/substitution axiom}{
                \linferenceRule[equiv]{
                    \asfml(s,\astrm)
                }{
                    \dbox{\hupdate{\humod{x}{\astrm}}}{\asfml(s,\x[0])}
                }
            }{}
            % FIXME: do I need this axiom, problem of need specify initial condition
            % or need just for ODE
            % \cinferenceRule[evolveb|$\dibox{'}$]{}{
            %     % FIXME: syntax forall t invalid?
            %     \linferenceRule[equiv]{
            %         \lforall{t\geq 0}{\dbox{\hupdate{\humod{x}{y(t)}}}{\asfml(s)}}
            %     }{
            %         \dbox{\hevolve{\D{x}=\astrm}}{\asfml(s)}
            %     }
            % }{$\hevolve{\D{y}(t)=\astrm}$}

            \cinferenceRule[choiceb|$\dibox{\cup}$]{axiom of nondeterministic choice}{
                \linferenceRule[equiv]{
                    \dbox{\asprg}{\asfml(s)}\land\dbox{\bsprg}{\asfml(s)}
                }{
                    \dbox{\hchoice{\asprg}{\bsprg}}{\asfml(s)}
                }
            }{}
            % TODO: name for [&]
            % TODO: [&] for DDEs?
            % \cinferenceRule[constb|$\&$]{}{
            %     \linferenceRule[equiv]{
            %         \lforall{t_0=x_0}{\dbox{\hevolve{\D{x}=\astrm}}{(\dbox{\hevolve{\D{x}=-\astrm}}{(x_0\geq t_0\limply\ivr)}\limply\asfml)}}
            %     }{
            %         \dbox{\hevolvein{\D{x}=\astrm}{\ivr}}{\asfml}
            %     }
            % }{}
            \cinferenceRule[composeb|$\dibox{{;}}$]{composition axiom}{ % double {} for correct spacing around semicolon
                \linferenceRule[equiv]{
                    \dbox{\asprg}{\dbox{\bsprg}{\asfml(s)}}
                }{
                    \dbox{\asprg;\bsprg}{\asfml(s)}
                }
            }{}
            \cinferenceRule[iterateb|$\dibox{*}$]{iteration axiom}{
                \linferenceRule[equiv]{
                    \asfml(s)\land\dbox{\asprg}{\dbox{\hrepeat{\asprg}}{\asfml(s)}}
                }{
                    \dbox{\hrepeat{\asprg}}{\asfml(s)}
                }
            }{}
            \cinferenceRule[K|K]{modal modus ponens}{
                \linferenceRule[impl]{
                    \dbox{\asprg}{\big(\asfml(s)\limply\bsfml(s)\big)}
                }{
                    \big(\dbox{\asprg}{\asfml(s)}\limply\dbox{\asprg}{\bsfml(s)}\big)
                }
            }{}
            % TODO: proper name I-Axiom
            \cinferenceRule[I|I]{loop induction}{
                \linferenceRule[impl]{
                    \dbox{\hrepeat{\asprg}}{\big(\asfml(s)\limply\dbox{\asprg}{\asfml(s)}\big)}
                }{
                    \big(\asfml(s)\limply\dbox{\hrepeat{\asprg}}{\asfml(s)}\big)
                }
            }{}
            % FIXME: do I need C-Axiom ?
            % TODO: C-Axiom holds for DDEs?
            % \cinferenceRule[C|C]{loop convergence}{
            %     \linferenceRule[impl]{
            %         \dbox{\hrepeat{\asprg}}{\lforall{v>0 (\varphi(v)\limply\ddiamond{\asprg}{\varphi(v-1)})}}
            %     }{
            %         \lforall{v}{(\varphi(v)\limply\ddiamond{\hrepeat{\asprg}}{\lexists{v\leq 0}{\varphi(v)}})}\qquad
            %     }
            % }{$v\notin\asprg$}
            % FIXME: do I need B-axiom?
            \cinferenceRule[B|B]{Barcan}{
                \linferenceRule[impl]{
                    \lforall{x}{\dbox{\asprg}{\asfml(s)}}
                }{
                    \dbox{\asprg}{\lforall{x}{\asfml(s)}}
                }
            }{$x\notin\asprg$}
            % TODO: check V axiom with def of FV, BV, can adds to fml?
            \cinferenceRule[V|V]{vacuous}{
                \linferenceRule[impl]{
                    \asfml
                }{
                    \dbox{\asprg}{\asfml}
                }
            }{$\freevars{\asfml}\cap\boundvars{\asprg}=\emptyset$}
        \end{calculus}
        \qquad
        % proof rules
        \begin{calculus}
            \cinferenceRule[G|G]{Gödel's generalization rule}{
                \linferenceRule[sequent]{
                    \asfml
                }{
                    \dbox{\asprg}{\asfml}
                }
            }{}
            \cinferenceRule[MP|MP]{modus ponens rule}{
                \linferenceRule[sequent]{
                    \asfml(s)\limply\bsfml(s) & \asfml(s)
                }{
                    \bsfml(s)
                }
            }{}
            \cinferenceRule[gena|$\forall$]{forall generalization rule}{
                \linferenceRule[sequent]{
                    \asfml(s)
                }{
                    \lforall{x}{\asfml(s)}
                }
            }{}
            % TODO: CT-Axiom, CQ-Axiom, CE-Axiom, US-Axiom
        \end{calculus}
        \end{calculuscollections}
        \caption{Delay differential dynamic logic axioms and proof rules.}
        \label{fig:axioms}
    \end{figure}

    The \emph{test axiom}~\irref{testb}


    The \emph{discrete assignment axiom}~\irref{assignb} substitutes $\x[0]$ by its new value $\astrm$ in the formula.
    % FIXME: admissibility condition for assignb
    This requires $x$ not to be ... (admissibility condition)

    The \emph{axiom of nondeterministic choice}~\irref{choiceb}

    The \emph{composition axiom}~\irref{composeb}

    % The \emph{solution axiom}~\irref{solb} replaces a DDE with the solution of its symbolic initial-value problem (as opposed to a convential IVP, which is numerical), This solution must be expressible as first-order formula of real arithmetic, which is only the case for a small class of delay differential equations.

    The \emph{iteration axiom}~\irref{iterateb} partially unwinds a loop, which can be used for bounded model checking.

    The \emph{induction axioms}~\irref{I}
    % and \irref{Cb}, which is a variant of Harel's convergence rule,
    can be applied when reasoning about loops with unbounded repetitions. 

    The \emph{modal modus ponens} axiom~\irref{K} and the \emph{Barcan formula}~\irref{B} are taken from first-order modal logic.

    axiom V

    The basic \emph{proof rules} for the presented Hilbert calculus are \emph{Gödel's necessitation rule}~\irref{G} of modal logic, as well as \emph{modus ponens}~\irref{MP} and \emph{$\forall$-generalization}~\irref{gena} of first-order logic.


    \subsection{Differential Axioms}
        \label{sec:differential-axioms}

        \begin{figure}[h]
            \begin{calculuscollections}{\coloumnwidth}
            \begin{calculus}
                % replace \D{(x)} with \der{x} 
                \cinferenceRule[Dconst|$c'$]{derive constant}{
                    \linferenceRule[eq]{0}{\der{a}}
                }{}
                \cinferenceRule[Dvar|${x[\cdot]'}$]{derive variable}{
                    \linferenceRule[eq]{\Dx[c]}{\der{\x[c]}}
                }{}
                \cinferenceRule[Dvars|]{derive variable}{
                    \linferenceRule[eq]{\Dx[s]}{\der{\x[s]}}
                }{}
                \cinferenceRule[Dplus|$+'$]{derive sum}{
                    \linferenceRule[eq]{\der{\astrm(s)}+\der{\bstrm(s)}}{\der{\astrm(s)+\bstrm(s)}}
                }{}
                \cinferenceRule[Dmult|$\cdot'$]{derive product}{
                    \linferenceRule[eq]{\der{\astrm(s)}\cdot\bstrm(s)+\astrm(s)\cdot\der{\bstrm(s)}}{\der{\astrm(s)\cdot\bstrm(s)}}
                }{}

                \cinferenceRule[DW|DW]{differential weakening}{
                    \dbox{\hevolvein{\D{x}=\astrm}{\ivr}}{\ivr}
                }{}
                \cinferenceRule[DC|DC]{differential cut}{
                    \linferenceRule[lpmi]{
                        \big(\dbox{\hevolvein{\D{x}=\astrm}{\ivr}}{\asfml(s)}
                        \lbisubjunct
                        \dbox{\hevolvein{\D{x}=\astrm}{\ivr\land\inv}}{\asfml(s)}\big)
                    }{
                        \dbox{\hevolvein{\D{x}=\astrm}{\ivr}}{\inv}
                    }
                }{}
                \cinferenceRule[DE|DE]{differential effect}{
                    \linferenceRule[equiv]{
                        \dbox{\hevolvein{\D{x}=\astrm}{\ivr}}{\dbox{\Dupdate{\Dumod{\D{x}}{\astrm}}}{\asfml(s,x,\D{x})}}
                    }{
                        \dbox{\hevolvein{\D{x}=\astrm}{\ivr}}{\asfml(s,x,\D{x})}
                    }
                }{}
                \cinferenceRule[DI|DI]{differential invariant}{
                    \linferenceRule[lpmi]{
                        \dbox{\hevolvein{\D{x}=\astrm}{\ivr}}{\inv}
                    }{
                        \big(\ivr\limply\inv\land\dbox{\hevolvein{\D{x}=\astrm}{\ivr}}{\D{(\inv)}}\big)
                    }
                }{}
            \end{calculus}
            \end{calculuscollections}
            \caption{Delay differential equation axioms and differential axioms.}
            \label{fig:D-axioms}
        \end{figure}

        $\Dx[c]$ and $\x[c]$ are not allowed in the expression of an differential invariant, because they would lead to discontinuities. Thus differential invariants $\inv$ must be \FOLR formulas.

    % \subsection{History Axiom}
    %     \label{history-axiom}

    %     Just replace symbol by its semantical meaning
    %     The occurence of $\x[-\tau]$ in expressions can be replaced by turning the (implicitely existing) time variable explicit, i.e.\
    %     uniform substitution $\sigma$
    %     allows substitution of $\x[-\tau]$ by, depending on context, $x(t-\tau)$ or $\forall{s\in[0,\tau]}{x(t-\tau)}$
    %     allows substitution of x, +quantifier from semantics in certain contexts

    %     \begin{calculus}
    %         \cinferenceRule[hist|hist]{history axiom}{
    %             \linferenceRule[equiv]{
    %                 \holdssince{-T}{\asfml(s)}
    %             }{
    %                 \hs[-T]{\asfml}
    %             }
    %         }{}
    %     \end{calculus}

    %     and $t\rightarrow t+s$

    %     for a piecewise continuous function $\theta\in\statespace$.

%     \subsection{Solution Axiom}
%         \label{sec:solution-axiom}

%         \begin{calculus}
%             \cinferenceRule[solb|solb]{solution axiom}{
%                 \linferenceRule[equiv]{
%                     (\lforall{0\leq t\leq\taumin}{\dbox{\hupdate{\humod{x}{y(t)}}}{\phi}})
%                     \land
%                     (\holdssince{-T}{x=y(s+\taumin)} \limply \dbox{\hevolvein{\D{x}=\astrm}{\ivr}}{\phi})
%                 }{
%                     \holdssince{-T}{x=\bstrm(s)} \limply \dbox{\hevolvein{\D{x}=\astrm}{\ivr}}{\phi}
%                 }
%             }{}
%         \end{calculus}

%         where $\forall 0\leq t\leq\tau$, $y'(t)=\theta(\theta_0)$, i.e.\ $y$ is a local solution of the symbolic initial value problem. The solution must be expressible in polynomial form so that the axiom leads to decidable arithmetic.
%         However, only a very little class of delay differential equations has such solutions.
%         need to reposition time, so that each step begins at $t=0$, no problem for autonomous ddes
%         (Since the DDE is autonomous, we can emit the time index.)

% it often makes sense to treat the very first initial condition separately, because after it solution is at least $C^1$, at $x(0)$ might be knick

    \subsection{Axiom of Steps}
        \label{sec:axiom-of-steps}

        The \emph{method of steps} presented in Section~\ref{sec:method-of-steps} translates into an axiom.

        By introducing a fresh variable $t$ as a clock, we restrict the evolution of a delay differntial equation starting from a state by a duration not longer than its smallest delay $\taumin$. This evolution is then wrapped in a loop.
        In this case, the right hand side of the differential equation only depends on the initial state of the loop, not on its own solution yet. Hence the differential equation is not longer a DDE, but of \emph{ordinary} type.
        Its right hand side is in general piecewise continuous.
        Theorem~\ref{thm:solution-existence} shows the existence of a unique local solution in this case.
        \begin{equation*} % no blank line before, causes to much space
            \cinferenceRule[stepsb|$\dibox{\steps}$]{method of steps axiom}{
                \linferenceRule[equiv]{
                    \dbox{\Dupdate{\Dumod{\D{x}}{\astrm}};\hrepeat{(\hupdate{\humod{t}{0}};\hevolvein{\D{t}=1\syssep \D{x}=\astrm}{\ivr\land 0\leq t\leq\taumin})}}{\asfml(s)}
                }{
                    \dbox{\hevolvein{\D{x}=\astrm}{\ivr}}{\asfml(s)}
                }
            }{}
        \end{equation*}

        where $\taumin$ is the (by magnitude) smallest delay appearing in $\astrm$.

    % \subsection{Axiom of One Step}
    %     \label{sex:axiom-of-one-step}

    %     Unwind loop in axiom od steps
    %     given an analytic solution on $[0,\tau]$ and given initial condition
    %     useful for bounded model checking

\section{Soundness}
    \label{sec:soundness}

    The following theorem is obviously fundamental for the presented theory in order to make sense.

    \begin{theorem}[Soundness of \ddL]\label{thm:ddL-soundness}
        The \ddL calculus is sound: every formula which is provable from \ddL axioms by \ddL proof rules is \emph{valid} (true in all states), i.e.\ $\infers\asfml$ implies $\models\asfml$.
    \end{theorem}
    \begin{proof}
        The soundness proof of most of the axioms adapted from \dL are independent of the definition of the state space, they only reason about states without considering their structure.
        % The arguments of most proof parts are the same as they were for the classic \dL, since only the definition of the statespace has been replaced. The proofs were independent of this definition, though.
        % FIXME: ref to choiceb
        This is the case for \irref{testb}, \irref{choiceb}
        \irref{composeb}, \irref{iterateb}, \irref{K}, \irref{I},
        %\irref{C},
        \irref{B}, \irref{V} and \irref{G}, whose proof can hence be found in \cite{Platzer12Complete}.

        % TODO: axiom [&] in combination with [steps]
        % backward continuation (Richard) -> [\&] limit up to T, state contains entire evolution, can check evo domain constraint on this state

        % 
    \begin{description}
        % FIXME: assignment symbol
        \item[\irref{assignb}]
        It is $\asstate\in\imodel{\IddL}{\dbox{\hupdate{\humod{x}{\astrm}}}{\asfml(s,\x[0])}}$ iff $\bsstate\in\imodel{\IddL}{\asfml(s,\x[0])}$ for all $(\asstate,\bsstate)\in\ireachability{\IddL}{\hupdate{\humod{x}{\astrm}}}$. There exists only a unique such state $\bsstate\in\states$. For this state it holds $\bsstate=\asstate$ except for the variable $x$, for which
        \begin{equation*}
            \bsstate(x)(\past) = \begin{cases*}
                    \ivaluation{\IddL}{\astrm} & if $\past=0$\\
                    \asstate(x)(\past) & if $\past\in\delayinterval$
                \end{cases*}
        \end{equation*}
        i.e.\ the two states coincide in the values for $\x[s]$, except in $\x[0]$. Hence $\asstate\in\imodel{\IddL}{\asfml(s,\astrm)}$ iff $\bsstate\in\imodel{\IddL}{\asfml(s,\x[0])}$.
        The same holds if $\asfml(\x[0])$ does not depend on $s$.
         (->substitution lemma in book)
        
        \item[\irref{stepsb}] Let $\asstate\in\imodel{\IddL}{\dbox{\hevolvein{\D{x}=\astrm}{\ivr}}{\asfml(s)}}$ and $\trajectory\from\compactum{0}{\duration}\to\states$ be a trajectory of duration $\duration\geq 0$ solving the DDE and having $\asstate$ as initial condition, i.e.\ $\trajectory(0)=\asstate$ on $\scomplement{\set{\D{x}}}$ and $\trajectory(\zeta)\in\imodel{\IddL}{\Dx[0]=\astrm\land\ivr}$ for all $\zeta\in\compactum{0}{\duration}$. By the choice of $\asstate$ it holds $\trajectory(\zeta)\in\imodel{\IddL}{\asfml(s)}$ for all $\zeta\in\compactum{0}{\duration}$.

        We need to show that $\asstate\in\imodel{\IddL}{\dbox{\Dupdate{\Dumod{\D{x}}{\astrm}};\hrepeat{(\hupdate{\humod{t}{0}};\hevolvein{\D{t}=1\syssep \D{x}=\astrm}{\ivr\land 0\leq t\leq\taumin})}}{\asfml(s)}}$.
        If we enter the loop in the right hand side zero times, this holds since $\trajectory(0)\in\imodel{\IddL}{\asfml(s)}$ and $\trajectory(0)=\modif{\asstate}{\Dx[0]}{\astrm}$.
        If we repeated the loop $n$ times, it holds after the last iteration that $\zeta=(n-1)\taumin+t\leq\duration$, since the evolution is restricted by $\ivr$. We know in this case that $\trajectory(\zeta)\in\imodel{\IddL}{\asfml(s)}$ what implies the assertion.

        The converse implication is shown analogously.

        \item[\irref{DW}] Proof as for \dL.
        
        \item[\irref{DC}] For a formula $\bsfmlfolR$ of \FOLR, let $\asstate\in\imodel{\IddL}{\dbox{\hevolvein{\D{x}=\astrm}{\ivr}}{\bsfmlfolR}}$ and $\trajectory\from\compactum{0}{\duration}\to\states$ be an arbitrary trajectory of duration $\duration\geq 0$, solving the DDE and having $\asstate$ as initial condition, i.e.\ $\trajectory(0)=\asstate$ on $\scomplement{\set{\D{x}}}$ and $\trajectory(\xi)\in\imodel{\IddL}{\Dx[0]=\astrm\land\ivr}$ for all $\xi\in\compactum{0}{\duration}$.

        Suppose $\asstate\in\imodel{\IddL}{\dbox{\hevolvein{\D{x}=\astrm}{\ivr}}{\asfml(s)}}$, i.e.\ there exists a $0\leq \bar{r}\leq\duration$, such that $\trajectory(\zeta)\in\imodel{\IddL}{\D{x}=\astrm\land\ivr}$ for all $\zeta\in\compactum{0}{\bar{r}}$ and $\trajectory(\bar{r})\in\imodel{\IddL}{\asfml(s)}$. Since $\zeta\leq\duration$ it is also $\trajectory(\zeta)\in\imodel{\IddL}{\bsfmlfolR}$. This is equivalent to $\trajectory(\zeta)\in\imodel{\IddL}{\D{x}=\astrm\land\ivr\land\bsfmlfolR}$ and $\trajectory(\zeta)\in\imodel{\IddL}{\bsfmlfolR}$ for all $\zeta\in\compactum{0}{\bar{r}}$, which is the same as $\asstate\in\imodel{\IddL}{\dbox{\hevolvein{\D{x}=\astrm}{\ivr\land\bsfmlfolR}}{\asfml(s)}}$.

        \item[\irref{DI}] This proof is an adaption of the \dL proof for DI given in~\cite{Platzer15Uniform}. Without loss of generality we restrict to the case of invariants of the form $\inv\equiv(g(x)\geq 0)$, where $g$ is a term of \FOLR. Then $\D{(\inv)}\equiv(\D{(g(x))}\geq 0)$ (by ??).

        Consider a state $\asstate\in\states$ with $\asstate\in\imodel{\IddL}{\ivr\limply\inv\land\dbox{\hevolvein{\D{x}=\astrm}{\ivr}}{\D{(\inv)}}}$. We need to distinguish two cases. If $\asstate\notin\imodel{\IddL}{\ivr}$, then their is no solution of the DDE and hence $\asstate\in\imodel{\IddL}{\dbox{\hevolvein{\D{x}=\astrm}{\ivr}}{\inv}}$ vacuously.

        If $\asstate\in\imodel{\IddL}{\ivr}$, then $\asstate\in\imodel{\IddL}{\dbox{\hevolvein{\D{x}=\astrm}{\ivr}}{\D{(\inv)}}}$. Let $\trajectory\from\compactum{0}{\duration}\to\states$ be a trajectory solving the DDE for some time $r\geq 0$, i.e.\ $\interpret,\trajectory\models(\hevolvein{\D{x}=\astrm}{\ivr})$.
        % FIXME: r=0 in DI proof
        If $\duration=0$ then $\asstate\in\imodel{\IddL}{\ivr}$ since the only varaible changing its value is $\D{x}$, which is not contained in
        % FIXME: is this freevars{\inv} like in proof by Platzer?
        $\ivr$ ($\freevars{\ivr}\cap\set{\D{x}}=\emptyset$). Hence it follows from the precondition that $\asstate\in\imodel{\IddL}{\inv}$ and for this reason $\asstate\in\imodel{\IddL}{\dbox{\hevolvein{\D{x}=\astrm}{\ivr}}{\inv}}$.
        % FIXME: free vars of inv? x' can be changed? wouldn't influence \ivr

        If $\duration>0$, $\asstate\in\imodel{\IddL}{\dbox{\hevolvein{\D{x}=\astrm}{\ivr}}{\D{(\inv)}}}$ implies $\interpret,\trajectory\models\D{(\inv)}$.
        By the Differential Lemma~\ref{lm:differential-lemma} it holds for all $\zeta\in\compactum{0}{\duration}$
        \begin{equation*}
            0 \leq \ivaluation{\iconcat[state=\trajectory(\zeta)]{\IddL}}{\D{(g(x))}}=\DD{\ivaluation{\iconcat[state=\trajectory(t)]{\IddL}}{g(x)}}{t}(\zeta)
        \end{equation*}
        $\freevars{\inv}\cap\set{\D{x}}=\emptyset$ (means no $\D{x}$ in invariant) implies $\trajectory(0)=\asstate\in\imodel{\IddL}{g(x)\geq 0}$.
        no $\x[c]$ in invariant, hence continuous. 
        Lemma~\ref{lm:pc-integrable} yields for any $z\in\compactum{0}{\duration}$
        \begin{equation*}
            \ivaluation{\iconcat[state=\trajectory(z)]{\IddL}}{g(x)}= \ivaluation{\iconcat[state=\trajectory(0)]{\IddL}}{g(x)} + \integral{0}{z} \DD{\ivaluation{\iconcat[state=\trajectory(t)]{\IddL}}{g(x)}}{t}(\zeta)\dx[\zeta] \geq 0
        \end{equation*}
        hence $\trajectory(z)\in\imodel{\IddL}{\inv}$ and hence $\asstate\in\imodel{\IddL}{\dbox{\hevolvein{\D{x}=\astrm}{\ivr}}{\inv}}$

        \item[\irref{DE}] Let $\asstate\in\imodel{\IddL}{\dbox{\hevolvein{\D{x}=\astrm}{\ivr}}{\asfml(s)}}$ and $\trajectory\from\compactum{0}{\duration}\to\states$ be a trajectory of duration $\duration\geq 0$ solving the DDE and having $\asstate$ as initial condition, i.e.\ $\trajectory(0)=\asstate$ on $\scomplement{\set{\Dx[0]}}$ and $\trajectory(\zeta)\in\imodel{\IddL}{\Dx[0]=\astrm\land\ivr}$ for all $\zeta\in\compactum{0}{\duration}$.
        Since $\asstate\in\imodel{\IddL}{\dbox{\hevolvein{\D{x}=\astrm}{\ivr}}{\asfml(s)}}$, we have $\trajectory(\duration)\in\imodel{\IddL}{\asfml}$ which, by the Differential Assignment Lemma~\ref{lm:diff-assignment}, is equivalent to $\trajectory(\duration)\in\imodel{\IddL}{\dbox{\Dupdate{\Dumod{\D{x}}{\astrm}}}{\asfml(s)}}$. Hence $\asstate\in\dbox{\hevolvein{\D{x}=\astrm}{\ivr}}{\dbox{\Dupdate{\Dumod{\D{x}}{\astrm}}}{\asfml(s)}}$.
        The inverse implication is shown in the same way.
    \end{description}
    \end{proof}

% \section{Proof Rules}
%     \label{sec:proof-rules}

%     In order to avoid small steps in proofs by applying one axiom after the other, several axioms can be combined to a more powerful proof formula.
%     Since we posses for \ddL of most axioms given in \dL, we can also adapt most of its \emph{sequent calculus proof rules}, as given in \cite{cheatsheet}.
%     % TODO: or s-formulas?
%     By $\asfmls,\bsfmls,\csfmls$ we denote sets of formulas.


%         combine proof rule to tactic
    
%     If the \ddL formula $\asfml$ can be derived by \ddL proof rules from \ddL axioms, we say it is provable and write $|-\asfml$
%     (includes first-order axioms and rules)

    % \paragraph{Propositional Sequent Calculus Proof Rules}
    %     \label{sec:propositional-rules}

    %     \par
    %     \begin{calculus}
    %         \cinferenceRule[closeTrue|$\top$R]{close by always true antedecent}{
    %             \linferenceRule[sequent]{
    %                 %
    %             }{
    %                 \lsequent{\asfmls}{\ltrue,\bsfmls}
    %             }
    %         }{}
    %         \cinferenceRule[close|id]{close by identity}{
    %             \linferenceRule[sequent]{
    %                 %
    %             }{
    %                 \lsequent{\asfml,\asfmls}{\asfml,\bsfmls}
    %             }
    %         }{}
    %         \cinferenceRule[andR|$\land$R]{and right proof rule}{
    %             \linferenceRule[sequent]{
    %                 \lsequent{\asfmls}{\asfml,\bsfmls}
    %                 &\lsequent{\asfmls}{\bsfml,\bsfmls}
    %             }{
    %                 \lsequent{\asfmls}{\asfml\land \bsfml,\bsfmls}
    %             }
    %         }{}
    %         \cinferenceRule[andL|$\land$L]{and left proof rule}{
    %             \linferenceRule[sequent]{
    %                 \lsequent{\asfmls, \asfml, \bsfml}{\bsfmls}
    %             }{
    %                 \lsequent{\asfmls, \asfml\land \bsfml}{\bsfmls}
    %             }
    %         }{}
    %         \cinferenceRule[implyR|$\limply$R]{imply right proof rule}{
    %             \linferenceRule[sequent]{
    %                 \lsequent{\asfmls,\asfml}{\bsfml,\bsfmls}
    %             }{
    %                 \lsequent{\asfmls}{\asfml\limply \bsfml,\bsfmls}
    %             }
    %         }{}
    %         % TODO: more rules, or etc.
    %     \end{calculus}


    % \paragraph{Quantifier Sequent Calculus Proof Rules}
    %     \label{sec:quantifier-rules}

    %     \par
    %     \begin{calculus}
    %         \cinferenceRule[allR|$\forall$R]{forall right proof rule}{
    %             \linferenceRule[sequent]{
    %                 \lsequent{\asfmls}{\asfml(y),\bsfmls}
    %             }{
    %                 \lsequent{\asfmls}{\lforall{x}{\asfml(x)},\bsfmls}
    %             }
    %         }{$y\notin\asfmls,\bsfmls$}
    %     \end{calculus}
    %     here $x$ does not mean $\x[0]$.

    % \paragraph{\dL Sequent Calculus Proof Rules}
    %     \label{sec:dL-rules}

    %     \par
    %     $x\notin\asfmls,\bsfmls$ or reduce $\hsc{}$ to $\hs{}$?
    %     \begin{calculus}
    %         % TODO: replace := by command
    %         % FIXME: check this rule, important for proof below
    %         \cinferenceRule[assignb|$\mathrel{{:}{=}}$]{discrete assignment}{
    %             \linferenceRule[sequent]{
    %                 \lsequent{\asfmls,\x[0]=\astrm}{\asfml,\bsfmls}
    %             }{
    %                 \lsequent{\asfmls}{\dbox{\hupdate{\humod{x}{\astrm}}}{\asfml},\bsfmls}
    %             }
    %         }{$x\notin\asfmls,\bsfmls$}

    %         \cinferenceRule[loop|loop]{loop invariant}{
    %             \linferenceRule[sequent]{
    %                 \lsequent{\asfmls}{\bsfml,\bsfmls}
    %                 &\lsequent{\bsfml}{\dbox{\alpha}{\bsfml}}
    %                 &\lsequent{\bsfml}{\asfml}
    %             }{
    %                 \lsequent{\asfmls}{\dbox{\hrepeat{\asprg}}{\asfml},\bsfmls}
    %             }
    %         }{with loop invariant $\bsfml$}
    %     \end{calculus}

    % \paragraph{Differential Equation Sequent Calculus Proof Rules}
    %     \label{sec:diff-rules}

    %     text

    %     \begin{calculus}
    %         \cinferenceRule[DC|DC]{differential cut}{
    %             \linferenceRule[sequent]{
    %                 \lsequent{\asfmls}{\dbox{\hevolvein{\D{x}=\astrm}{\ivr}}{\inv},\bsfmls}
    %                 &\lsequent{\asfmls}{\dbox{\hevolvein{\D{x}=\astrm}{\ivr\land \inv}}{\asfml}}
    %             }{\lsequent{\asfmls}{\dbox{\hevolvein{\D{x}=\astrm}{\ivr}}{\asfml},\bsfmls}}
    %         }{}
    %         \cinferenceRule[dI|dI]{differential invariant}{
    %             \linferenceRule[sequent]{
    %                 \lsequent{\asfmls,\asfml}{\inv,\bsfmls}
    %                 &\lsequent{\asfml}{\dbox{\Dupdate{\Dumod{\D{x}}{\astrm}}}{\der{\inv}}}
    %             }{\lsequent{\asfmls}{\dbox{\hevolvein{\D{x}=\astrm}{\ivr}}{\asfml},\bsfmls}}
    %         }{}
    %         \cinferenceRule[dW|dW]{differential weakening}{
    %             \linferenceRule[sequent]{
    %                 \lsequent{\asfmls}{\lforall{x}{(\ivr\limply\asfml)},\bsfmls}
    %             }{\lsequent{\asfmls}{\dbox{\hevolvein{\D{x}=\astrm}{\ivr}}{\asfml},\bsfmls}}
    %         }{}
    %     \end{calculus}

    % TODO: Rule of Steps
    % \subsection{Rule of Steps}
    %     \label{sec:rule-of-steps}
    %     ODEs don't have notion of \emph{one step}, but DDEs do.
    %     condition valid for initial condition and given condition for a $s\leq t$ then condition holds after dde-evolution of max time tau and safety follows from condition then condition holds after dde with mentioned initial condition
    %     loop induction
    %     truth value of invariant never changes during dde
    %     % \begin{equation}
    %     % \frac{\asfmls(\xbartaut{0})\rightarrow F(\xbartaut{0})\quad F(\xbartaut{s})\rightarrow [\D{x}=\theta(\xbartaut{t})\,\&\,t\leq\tau]F(\xbartaut{t}) \quad F(\xbartaut{t})\rightarrow\phi}{\asfmls(\xbartaut{0}) \rightarrow [\D{x}=\theta(\xbartaut{t})]\phi}
    %     % \end{equation}

    %     %\begin{small}
    %     \begin{calculus}
    %         % FIXME: \landS -> steps
    %         \cinferenceRule[steps|stps]{steps proof rule}{
    %             \linferenceRule[sequent]{
    %                 \lsequent{\asfmls}{\inv,\bsfmls}
    %                 &\lsequent{t=0,\inv(\theta(t-\tau))}{\dbox[]{\hevolvein{\D{t}=1\syssep \D{x}=\rho(x,\theta(t-\tau))}{(\ivr\land 0\leq t\leq\tau)}}{\inv}}
    %                 &\lsequent{\inv}{\asfml}
    %             }{
    %                 \lsequent{\asfmls}{\dbox[]{\hevolvein{\D{x}=\rho(x,\x[-\tau])}{\ivr}}{\asfml},\bsfmls}
    %             }
    %         }{}
    %     \end{calculus}
        %\end{small}

    %     Formulas of the form $\asfmls(\x[-\tau])$ implicitely also include a statement about $x$.

    % \subsection{Delay Differential Induction}
    %     \label{sec:delay-differential-induction}

    %     Like loop+DI, the former for $\lforall{k\geq 0}$, the latter for $\lforall{k\tau\leq t \leq (k+1)\tau}$
    %     The idea behind this proof rule is
    %     the initial condition fulfills a certain condition
    %     evolve a little in time
    %     the values which come out of the dde also fulfill this condition
    %     all runs od dde lead to states satisfying formula
    %     start in safe state
    %     dynamical system only evolve in direction of safe states in $\inv$
    %     direction is given by dde: in state $\omega$ it is $\imodel{}{f(x)}\omega$
    %     only need how system evolves in relation to $\inv$
    %     hence stays safe forever
    %     so the state after the DDE fulfills the condition, parts of the state come from initial condition, parts from dde outcome

    %     invariant of form with $\x[s]$, but without $\x[c]$, i.e. becomes \FOLR formula if I fix $\past=0$.

    %     \begin{calculus}
    %         \cinferenceRule[DDI|DDI]{delay differential induction proof rule}{
    %             % FIXME: \der{} <-> \D{} ?
    %             \linferenceRule[sequent]{
    %                 \lsequent{\asfmls}{\hsc{\bsfml(s)},\bsfmls}
    %                 &\lsequent{\ivr,0\leq t\leq\tau,\inv(\theta)}{\dbox{\hevolve{\Dupdate{\Dumod{\D{x}}{\rho(x,\theta)}}}}{\der{\bsfml(0)}}}
    %                 % FIXME: only hs?
    %                 &\lsequent{\hsc{\bsfml(s)}}{\asfml(s)}
    %             }{
    %                 \lsequent{\asfmls}{\dbox{\hevolvein{\D{x}=\astrm}{\ivr}}{\asfml(s)},\bsfmls}
    %             }
    %         }{}
    %     \end{calculus}

    %     % sidewaysfigure
    %     %\begin{proof}\small
    % \begin{landscape}
        
    %     % \begin{sidewaysfigure}
    %     \footnotesize
    %     % \centering
    %     % TODO: hist axiom earlier? before first DC?
    %     \begin{sequentdeduction}[]
    %         \linfer[stepsb+composeb]{
    %             \linfer[assignb]{
    %                 \linfer[loop]{
    %                     % FIXME: formel zu hoch
    %                     \lsequent{\asfmls,\Dx[0]=\astrm}{\hs{\bsfml(s)},\bsfmls}
    %                     &\linfer[composeb+assignb]{
    %                         \linfer[DC]{
    %                             \linfer[DC]{
    %                                 (1)
    %                             }{
    %                                 \lsequent{\hs{\bsfml(s)},t=0}{\dbox{\hevolvein{\D{t}=1\syssep \D{x}=\astrm}{(\ivr\land 0\leq t\leq\tau\land \inv(x(t-\tau)))}}{\hs{\bsfml(s)}}}
    %                             }
    %                             &\linfer[dW]{
    %                                 (2)
    %                             }{
    %                                 \lsequent{\hs{\bsfml(s)},t=0}{\dbox{\hevolvein{\D{t}=1\syssep \D{x}=\astrm}{(\ivr\land 0\leq t\leq\tau)}}{\inv(x(t-\tau))}}
    %                             }
    %                         }{
    %                             \lsequent{\hs{\bsfml(s)},t=0}{\dbox{\hevolvein{\D{t}=1\syssep \D{x}=\astrm}{(\ivr\land 0\leq t\leq\tau)}}{\hs{\bsfml(s)}}}
    %                             % \lsequent{\lforall{s\in[-\tau,0]}{\inv(x(t+s))},t=0}{\dbox[]{\hevolvein{\D{t}=1\syssep \D{x}=\astrm}{(\ivr\land 0\leq t\leq\tau)}}{\lforall{s\in[-\tau,0]}{\inv(x(t+s))}}}
    %                         }
    %                     }{
    %                         % FIXME: hsc?
    %                         \lsequent{\hs{\bsfml(s)}}{\dbox{\hupdate{\humod{t}{0}}; \hevolvein{\D{t}=1\syssep \D{x}=\astrm}{(\ivr\land 0\leq t\leq\tau)}}{\hs{\bsfml(s)}}}
    %                     }
    %                     &\lsequent{\hs{\bsfml(s)}}{\asfml(s)}
    %                 }{
    %                     % FIXME: Soundness of assignb, and applicaple here?
    %                     % x' not in Gamma, and x not affected since (x[0])' and x'[0] need not to coincide?
    %                     \lsequent{\asfmls,\Dx[0]=\astrm}{\dbox{\hrepeat{(\hupdate{\humod{t}{0}}; \hevolvein{\D{t}=1\syssep \D{x}=\astrm}{(\ivr\land 0\leq t\leq\taumin)})}}{\asfml(s)}},\bsfmls
    %                 }
    %             }{
    %                 \lsequent{\asfmls}{\dbox{\Dupdate{\Dumod{\D{x}}{\astrm}}}{\dbox{\hrepeat{(\hupdate{\humod{t}{0}}; \hevolvein{\D{t}=1\syssep \D{x}=\astrm}{(\ivr\land 0\leq t\leq\taumin)})}}{\asfml(s)}}},\bsfmls
    %             }
    %         }{
    %             \lsequent{\asfmls}{\dbox{\hevolvein{\D{x}=\astrm}{\ivr}}{\asfml(s),\bsfmls}}
    %         }
    %     \end{sequentdeduction}

    %     % TODO: ref to here: (2)
    %     \begin{sequentdeduction}
    %         \linfer[dW]{
    %             \linfer[allR]{
    %                 \linfer[implyR]{
    %                     \linfer[]{
    %                         \lclose
    %                     }{
    %                         \lsequent{\lforall{s\in[-\tau,0]}{\inv(x(s))},t=0,\ivr(r,y),0\leq r\leq\tau}{\inv(x(r-\tau))}
    %                     }
    %                 }{
    %                     \lsequent{\lforall{s\in[-\tau,0]}{\inv(x(s))},t=0}{\ivr(r,y)\land 0\leq r\leq\tau\limply \inv(x(r-\tau))}
    %                 }
    %             }{
    %                 \lsequent{\lforall{s\in[-\tau,0]}{\inv(x(s))},t=0}{\lforall{(t,x)}{(\ivr\land 0\leq t\leq\tau\limply \inv(x(t-\tau)))}}
    %             }
    %         }{
    %             \lsequent{\lforall{s\in[-\tau,0]}{\inv(x(s))},t=0}{\dbox{\hevolvein{\D{t}=1\syssep \D{x}=\astrm}{(\ivr\land 0\leq t\leq\tau)}}{\inv(x(t-\tau))}}
    %         }
    %     \end{sequentdeduction}

    %     % TODO: ref to here: (1)
    %     \begin{sequentdeduction}
    %         \linfer[DC]{
    %             \linfer[dI]{
    %                 \linfer[hist]{
    %                     \linfer[]{
    %                         \lclose
    %                     }{
    %                         \lsequent{\hs{\bsfml(s)},t=0}{\bsfml(0)}
    %                     }
    %                 }{
    %                     \lsequent{\hs{\bsfml(s)},t=0,A, \inv(x(t-\tau))}{\bsfml(0)}
    %                 }
    %                 % TODO: A=\ivr, 0\leq t\leq\tau
    %                 &\lsequent{A, \inv(x(t-\tau)))}{\dbox{\Dupdate{\Dumod{\D{t}}{1},\Dumod{ \D{x}}{\astrm}}}{\der{\inv(x(t))}}}
    %                 %}
    %             }{
    %                 \lsequent{\hs{\bsfml(s)},t=0}{\dbox{\hevolvein{\D{t}=1\syssep \D{x}=\astrm}{(A\land \inv(x(t-\tau)))}}{\bsfml(0)}}
    %             }
    %             &\linfer[dW]{
    %                 (3)
    %             }{
    %                 \lsequent{\lforall{s\in[-\tau,0]}{\inv(x(s))},t=0}{\dbox{\hevolvein{\D{t}=1\syssep \D{x}=\astrm}{(A\land \inv(x(t-\tau))\land \inv(x(t)))}}{\lforall{s\in[-\tau,0]}{\inv(x(t+s))}}}
    %             }
    %         }{
    %             \lsequent{\hs{\bsfml(s)},t=0}{\dbox{\hevolvein{\D{t}=1\syssep \D{x}=\astrm}{(\ivr\land 0\leq t\leq\tau\land \inv(x(t-\tau)))}}{\lforall{s\in[-\tau,0]}{\inv(x(t+s))}}}
    %         }
    %     \end{sequentdeduction}
    %     % TODO: ref here (3)
    %     \begin{sequentdeduction}
    %         \linfer[dW]{
    %             \linfer[allR]{
    %                 \linfer[implyR]{
    %                     \linfer[]{
    %                         \lclose
    %                     }{
    %                         \lsequent{\lforall{s\in[-\tau,0]}{\inv(x(s))}, t=0, \ivr(r,y), 0\leq r\leq\tau, \inv(y(r-\tau)), \inv(y(r))}{\lforall{s\in[-\tau,0]}{\inv(y(r+s))}}
    %                     }
    %                 }{
    %                     \lsequent{\lforall{s\in[-\tau,0]}{\inv(x(s))}, t=0}{((\ivr(r,y)\land 0\leq r\leq\tau\land \inv(y(r-\tau))\land \inv(y(r)))\limply\lforall{s\in[-\tau,0]}{\inv(y(r+s))})}
    %                 }
    %             }{
    %                 \lsequent{\lforall{s\in[-\tau,0]}{\inv(x(s))}, t=0}{\lforall{(t,x)}{((A\land \inv(x(t-\tau))\land \inv(x(t)))\limply\lforall{s\in[-\tau,0]}{\inv(x(t+s))})}}
    %             }
    %         }{
    %             \lsequent{\lforall{s\in[-\tau,0]}{\inv(x(s))}, t=0}{\dbox{\hevolvein{\D{t}=1\syssep \D{x}=\astrm}{(A\land \inv(x(t-\tau))\land \inv(x(t)))}}{(\lforall{s\in[-\tau,0]}{\inv(x(t+s))})}}
    %         }
    %     \end{sequentdeduction}
    %     % \end{sidewaysfigure}
    %     \normalsize
    %         \end{landscape}

        % \end{proof}

    \subsection{Delay Differential Invariant}
        \label{sec:delay-differential-invariant}

        loop and differential invariants are of form $\lforall{s\in[-\tau,0]}{\inv(x(s))}$
        can they have $x$?

        Meaning of derivative $\der{\inv(\x[-\tau])}=\lforall{s\in[-\tau,0]}{\der{\inv(x(t+s))}}$ would lead to occurrence of derivative of init cond, which we don't know

        Mentioning $\x[-\tau]$ in the invariant differential invariant is not permitted, since derivation would lead to the occurrence of the symbol $x_{2\tau}$, whose properties are out of the scope of the current state.

        % TODO: ref to DDI
        As for ODEs in \dL, we cannot have $x(t)$ in the premise in DDI. Would permit to prove wrong statements.

        Invariant for limited time: use with loop unrolling (can it be generalized to unlimited inv?)

    % TODO: Example
    \subsection{Examples}
        \label{sec:examples}

        \subsubsection{Example 1}
            \label{sec:ddi-example-1}

            Consider the non-linear first-order delay differential equation
            \begin{equation}
                \begin{cases}
                    \D{x}(t) = x(t-\tau) & t \geq \tzero\\
                    x(t) = \theta(t)\geq 0 & t \in [\tzero-\tau,\tzero]
                \end{cases}
            \end{equation}
            Using the invariant $F\equiv(x^3\geq 0)$ we prove that the solution stays non-negativ for all time $t$.
            DDE is autonomous, can assume $\tzero=0$.
            \footnotesize
            \begin{sequentdeduction}
                \linfer[DC]{
                    \linfer[DI]{
                        \linfer[DDW]{
                            \linfer[DE+G]{
                                \linfer[assignb]{
                                    \linfer[QE]{
                                        \lclose
                                    }{
                                        (\hsc{\x[s]\geq 0}\limply x^3\geq 0 \land
                                        3x^2\x[-\tau]\geq 0 \land
                                        \hs{\x[s]\geq 0}) \land
                                        (x^3\geq 0 \limply x\geq 0)
                                    }
                                }{
                                    (\hsc{\x[s]\geq 0}
                                    \limply x^3\geq 0
                                    \land
                                    \dbox{\Dupdate{\Dumod{\D{x}}{\x[-\tau]}}}{(3x^2\D{x}\geq 0)}
                                    \land
                                    \hs{\x[s]\geq 0})
                                    \land
                                    (x^3\geq 0 \limply x\geq 0)
                                }
                            }{
                                (\hsc{\x[s]\geq 0}\limply x^3\geq 0
                                \land
                                \dbox{\hevolve{\D{x}=\x[-\tau]}}{(3x^2\D{x}\geq 0)}
                                \land
                                \hs{\x[s]\geq 0})
                                \land
                                (x^3\geq 0 \limply x\geq 0)
                            }
                        }{
                            \hsc{\x[s]\geq 0}
                            \limply
                            x^3\geq 0
                            \land
                            \dbox{\hevolvein{\D{x}=\x[-\tau]}{x^3\geq 0}}{(\hsc{\x[s]\geq 0})}
                            \land
                            \dbox{\hevolve{\D{x}=\x[-\tau]}}{(3x^2\D{x}\geq 0)}
                        }
                    }{
                        \hsc{\x[s]\geq 0}
                        \limply
                        \dbox{\hevolvein{\D{x}=\x[-\tau]}{x^3\geq 0}}{(\hsc{\x[s]\geq 0})}
                        \land
                        \dbox{\hevolve{\D{x}=\x[-\tau]}}{(x^3\geq 0)}
                    }    
                }{
                    \hsc{\x[s]\geq 0}
                    \limply
                    \dbox{\hevolve{\D{x}=\x[-\tau]}}{(\hsc{\x[s]\geq 0})}
                }
            \end{sequentdeduction}
            % \begin{sequentdeduction}
            %     \linfer[DDI]{
            %         \linfer[]{
            %             \lclose
            %         }{
            %             \lsequent{\x[-\tau]\geq 0}{\x[-\tau]^3\geq 0}
            %         }
            %         &\linfer[]{
            %             \linfer[]{
            %                 \linfer[]{
            %                     \lclose
            %                 }{
            %                     \lsequent{\theta^3\geq 0}{3x^2\theta\geq 0}
            %                 }
            %             }{
            %                 \lsequent{0\leq t\leq \tau,\theta^3\geq 0}{\dbox{\Dupdate{\Dumod{\D{x}}{\theta}}}{(3x^2 \D{x}\geq 0)}}
            %             }
            %         }{
            %             %\lclose
            %             \lsequent{0\leq t\leq \tau,\theta^3\geq 0}{\dbox{\Dupdate{\Dumod{\D{t}}{1},\Dumod{\D{x}}{\theta}}}{\der{x^3\geq 0}}}
            %         }
            %         &\linfer[]{
            %             \lclose
            %         }{
            %             \lsequent{\x[-\tau]^3\geq 0}{\x[-\tau]\geq 0}
            %         }
            %     }{
            %         \lsequent{\holdssinceclosed{-\tau}{\x[s]\geq 0}}{\dbox{\D{x}=\x[-\tau]}{(\holdssinceclosed{-\tau}{\x[s]\geq 0})}}
            %     }
            % \end{sequentdeduction}
            \normalsize
            In the same way we can prove that the solution stays negative for all $t$, if the initial condition is non-positive.

        \subsubsection{Example 2}
            \label{sec:ddi-example-2}

            % FIXME: it's not autonomous ?
            Consider the non-linear first-order delay differential equation with explicitely given initial condition
            \begin{equation}
                \begin{cases}
                    \D{x}(t) = -x(t-1)^2 & t \geq 0\\
                    x(t) = t & t \in [-1,0]
                \end{cases}
            \end{equation}
            Using $F\equiv(x^3\leq 0)$ we prove that the solution stays non-positiv.
            \begin{small}
                \begin{sequentdeduction}
                    \linfer[DDI]{
                        \linfer[hist]{
                            \linfer[]{
                                \linfer{\lclose}{
                                    \lsequent{}{\lforall{s\in[-1,0]}{s^3\leq 0}}
                                }
                            }{
                                \lsequent{t=0,\lforall{s\in[-1,0]}{x(t+s)=t+s}}{\lforall{s\in[-1,0]}{x(t+s)^3\leq 0}}
                            }
                        }{
                            \lsequent{t=0,\x[-1]=t}{\x[-1]^3\leq 0}
                        }
                        &\linfer[]{
                            \linfer[]{
                                \linfer[closeTrue]{
                                    \lclose
                                }{
                                    \lsequent{}{-3x^2\theta^2\leq 0}
                                }
                            }{
                                \lsequent{0\leq t\leq 1,\theta^3\leq 0}{\dbox{\Dupdate{\Dumod{\D{x}}{-\theta^2}}}{(-3x^2 \D{x}\leq 0)}}
                            }
                        }{
                            %\lclose
                            \lsequent{0\leq t\leq 1,\theta^3\leq 0}{\dbox{\Dupdate{\Dumod{\D{t}}{1},\Dumod{\D{x}}{-\theta^2}}}{\der{x\leq 0}}}
                        }
                        &\linfer[]{
                            \lclose
                        }{
                            \lsequent{\x[-1]^3\leq 0}{\x[-1]\leq 0}
                        }
                    }{
                        \lsequent{t=0,\x[-1]=t}{\dbox{\D{x}=-\x[-1]^2}{(\x[1]\leq 0)}}
                    }
                \end{sequentdeduction}
            \end{small}

            This proof doesn't even need any premisse about $\x[-\tau]$ in the induction step.

        % \subsubsection{Example 3}
        %     \label{sec:ddi-example-3}

        %     We want to proof the safety condition $\asfml\equiv(-1\leq x\wedge x\leq 1)$ for the continuous program with delay differential equation
        %     \begin{equation}
        %         \forall\,t\in[-\tau,0]:\,-1\leq\xbartaut{0}(t)\wedge\xbartaut{0}(t)\leq 1
        %         \rightarrow
        %         [\D{x}=-\x[-\tau]] (\forall\,s\in[-\tau,0]:\,-1\leq\xbartaut{t}(s)\wedge\xbartaut{t}(s)\leq 1)
        %     \end{equation}
        %     in explicit quantified representation. It can be simplified by using an implicit time variable and a context depending meaning of $\x[-\tau]$
        %     \begin{equation}
        %         -1\leq\x[-\tau]\leq 1 \rightarrow [\D{x}=-\x[-\tau]]\asfml.
        %     \end{equation}

        %     We apply the rule of steps using the safety condition $\phi$ as step condition $F(x)\equiv(\forall\,t\in[-\tau,0]:\,-1\leq x(t)\wedge x(t)\leq 1)$.

        %     The first and third premisses hold. The second by ??? (delay differential invariant)

        %     Use the algebraic differential invariant $F\equiv(-1\leq x^3\wedge x^3\leq1)$, which is valid for the initial condition. Differentiation leads to the inequalities, which needs to be shown $\forall t\in[0,\tau]$
        %     \begin{equation}
        %         0\leq 3\,x(t)^2 \D{x}(t) = -3\,x(t)^2 \x[-\tau](t)
        %     \end{equation}

        %     This holds since

