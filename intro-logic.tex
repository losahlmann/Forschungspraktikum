\chapter{Introduction to Logic}
    \label{sec:introduction-logic}

    \section{First-Order Logic}
        \label{sec:first-order-logic}

        as defined in \cite{Platzer10HybridSystems} and \cite{Huth04LogicInCS}

        % TODO: it is predicate logic, not propositional

        First-order logic (\FOL) defines a syntax of logical formulas inductively from a set of function and predicate symbols, called signature $\signature$. alphabet to built well-formed formulas from

        (comprises three subsets: functions, predicates, constants)

        function: takes value of argument, gives back value, can be any type
        function symbol stand for function
        $f,g,h$

        predicate gives back either true or false, depending on values of arguments
        predicate symbol is either true or false
        $p,q,r$

        refer to objects
        arity of function or predicate symbol: number of arguments (can be 0)
        specified by signature $\signature$
        for zero arity $c$ constant symbol=function without argument, so-called nullary function

        set of logical variable symbols $\varsymbols$, stand for objects
        $x,y,z$

        formulas denote truth values
        terms are expressions which denote objects
        terms are well-formed/feasible arguments for functions/predicates

        \subsection{Syntax}
            \label{sec:FOL-syntax}

            for now only syntactic definitions, no specific meaning yet

            \begin{definition}[Terms]
                well-formed terms: variables, functions applied to terms
                $\terms$ set of all terms
                smallest set with
                \begin{enumerate}
                    \item logical variables are terms, $x\in\varsymbols$ then $x\in\terms$
                    \item a nullary function $c\in\signature$ is a term
                    % TODO: command for integer range
                    \item If $f\in\signature$ of arity $k>0$ and $\istrm{i}\in\terms$ for $i=1,\ldots,k$, then $f(\istrm{1},\ldots,\istrm{k})\in\terms$
                \end{enumerate}

                This can alternatively be written as grammar in Backus-Naur form
                \begin{equation}
                    \astrm,\istrm{i} \Coloneqq
                        x \mid
                        c \mid
                        f(\istrm{1},\ldots,\istrm{k})
                \end{equation}
                where $x$ is ranging over the set of logical variables $\varsymbols$, $c$ over the nullary functions in $\signature$ and $f$ over the elements in $\signature$ with arity $k>0$.

            \end{definition}

            \begin{definition}[First-Order Formulas]
                well-formed formulas of a (first-order) logic are
                a formal language over alphabet $\signature\cup\varsymbols$
                words formed by recursive combination of signature-symbols with logical operator symbols
                using the set of terms $\terms$

                $\FOLformulas$ set of formulas of first-order logic
                smallest set with
                \begin{enumerate}
                    \item If predicate symbol $p\in\signature$ of arity $k>=0$ and $\istrm{i}\in\terms$ for $i=1,\ldots,k$ then $p(\istrm{1},\ldots,\istrm{k})\in\FOLformulas$
                    \item If $\asfml,\bsfml\in\FOLformulas$, then $\lnot\asfml,(\asfml\land\bsfml),(\asfml\lor\bsfml),(\asfml\limply\bsfml)\in\FOLformulas$ are formulas
                    \item quantifiers formula $\asfml$, variable $x$ $(\lforall{x}{\asfml}),(\lexists{x}{\asfml})\in\FOLformulas$
                \end{enumerate}

                or again as
                \begin{equation}
                    \asfml,\bsfml \Coloneqq
                        p(\istrm{1},\ldots,\istrm{k}) \mid
                        \lnot\asfml \mid
                        \asfml\land\bsfml \mid
                        \asfml\lor\bsfml \mid
                        \asfml\limply\bsfml \mid
                        \lforall{x}{\asfml} \mid
                        \lexists{x}{\asfml}
                \end{equation}
                where $p\in\signature$ is a predicate symbol (of arity $k\geq 1$), the terms $\istrm{i}\in\terms$ and the variable $x\in\varsymbols$
            \end{definition}

        \subsection{Semantics}
            \label{sec:FOL-semantics}

            \textbf{semantics} specify an interpretation of each symbol of ...
            in language of ...
            given this defines a \textbf{truth value} of a full formula

            \textbf{interpretation} $I$ of function and predicate symbols

            assignment of logical variables
            variables are place holders for any kind of concrete value

            provide seperate characterisation, meaning of the connectives
            truth tables
            to define what is true and false
            semantics is equivalent to proof theory

            valuation: assignment of truth value to all atoms
            infinitely many valuations, called models

            evaluation of formula: computing truth value for it, based on a valuation
            requires to fix a universe of concrete values

            \begin{definition}[Interpretation]
                An interpretation (or model) $\interpret$ assigns concrete elements/function/relation to their corresponding symbols in a given a signature $\signature$. It consists of
                \begin{enumerate}
                    \item The universe, a non-empty set $\universe$ of concrete values/objects
                    \item nullary function symbol
                    % FIXME: proper function definitions, ie. : and arrow
                    % TODO: reference to cartesian product
                    \item To each function symbol $f\in\signature$ of arity $k\geq 1$, $\interpret(f):\universe^k\rightarrow\universe$ is a function with $k$ arguments.
                    \item Each predicate symbol $p$ of arity $k\geq 1$ a relation $\interpret(p)\subseteq\universe^n$ subset
                \end{enumerate}

            \end{definition}

            Interpretation associates $f$ with $\interpret(f)(d_1,\ldots,d_k)\in\universe$ value of function at position $(d_1,\ldots,d_k)\in\universe^k $
            predicate $p$ true at position $(d_1,\ldots,d_k)\in\universe^k$ iff $(d_1,\ldots,d_k)\in\interpret(p)$
            alternative but equivalent formulation: characteristic function $\interpret(p):\universe^k\rightarrow\{\ltrue,\lfalse\}$ with $p$ true at $(d_1,\ldots,d_k)\in\universe^k$ iff $\interpret(p)(d_1,\ldots,d_k)=\ltrue$

            % FIXME: Zielraum in englisch
            difference between functions and predicates is Zielraum

            \begin{definition}[Assignment]
                interpretation of variables
                assignment for a logical variable $x\in\varsymbols$
                map $\assignment:\varsymbols\rightarrow\universe$, assign a value/object from the universe to each variable symbol.
                % TODO: notation for x|->a
            \end{definition}


            \subsubsection{Valuation of Terms}
                \label{sec:valuation-of-terms}

                given an interpretation and assignment for a signature, term can be evaluated
                again inductively

                \begin{definition}
                    valuation $\ivaluation{\IFOL}{\phi}$ defined by
                    \begin{enumerate}
                        \item logical variable $\ivaluation{\IFOL}{x} = \assignment(x)$
                        \item constant
                        \item function symbol $f\in\signature$ of arity $k\geq 1$ $\ivaluation{\IFOL}{f(\istrm{1},\ldots,\istrm{k})} = \interpret(f)(\ivaluation{\IFOL}{\istrm{1}},\ldots,\ivaluation{\IFOL}{\istrm{k}})$
                    \end{enumerate}
                \end{definition}

            \subsubsection{Valuation of First-Order Formulas}
                \label{sec:valuation-of-formulas}

                truth table
                translation into natural language?
                \begin{definition}
                    valuation of first-order formulas
                    interpretation $\interpret$
                    assignment $\assignment$
                    \begin{enumerate}
                        \item predicate $\ivaluation{\IFOL}{p(\istrm{1},\ldots,\istrm{k})} = \interpret(p)(\ivaluation{\IFOL}{\istrm{1}},\ldots,\ivaluation{\IFOL}{\istrm{k}})$
                        \item and/conjunction $\ivaluation{\IFOL}{\astrm\land\bstrm} = \ltrue$ iff $\ivaluation{\IFOL}{\astrm}=\ltrue$ and $\ivaluation{\IFOL}{\bstrm}=\ltrue$
                        \item or/disjunction $\ivaluation{\IFOL}{\astrm\lor\bstrm} = \ltrue$ iff $\ivaluation{\IFOL}{\astrm}=\ltrue$ or $\ivaluation{\IFOL}{\bstrm}=\ltrue$
                        \item not $\ivaluation{\IFOL}{\lnot\astrm} = \ltrue$ iff $\ivaluation{\IFOL}{\astrm} \neq \ltrue$
                        \item imply $\ivaluation{\IFOL}{\astrm\limply\bstrm} = \ltrue$ iff $\ivaluation{\IFOL}{\astrm} \neq \ltrue$ or $\ivaluation{\IFOL}{\bstrm}=\ltrue$
                        \item forall $\ivaluation{\IFOL}{\lforall{x}{\astrm}} = \ltrue$ iff $\ivaluation{\imodif[assign]{\IFOL}{x}{a}}{\astrm} = \ltrue$ for all $a\in\R$
                        \item exists $\ivaluation{\IFOL}{\lexists{s}{\astrm}} = \ltrue$ iff $\ivaluation{\imodif[assign]{\IFOL}{x}{a}}{\astrm} = \ltrue$ for some $a\in\R$
                    \end{enumerate}

                    % FIXME: use \imodels for |=
                    With $M=(\interpret,\assignment)$ Also write $\imodels{\IFOL}{\astrm}$ the so-called satisfaction relation if and only if $\ivaluation{\IFOL}{\astrm}=\ltrue$
                    say that $\interpret,\assignment$ satisfies $\astrm$.
                    Formula $\astrm$ is called valid if $M|= \astrm$ for all possible interpretations and assignments. just write $|=\astrm$
                \end{definition}

        \subsection{Proof Theory}
        \label{sec:FOL-proof-theory}

            establish validity by proofs
            semantics: given interpretation,assignment -> compute its truth value, check satisfaction easy
            check validity difficult, need to check for all interpretations, assignments
            proofs shows validity, but not valid difficult, how to show that there is no proof?

            proof for establishing evidence of assertions, like $\lsequent{\Gamma}{\astrm}$ valid
            not useful for $\lsequent{\Gamma}{\astrm}$ not valid

            two characterisations need be equivalent, ie soundness and completeness

            valid formulas are of particular interest, hold under all circumstances, ie for all interpretations and assignments

            need to identify these, check validity

            if not valid, there is a counterexample, an interpretation and assignment for which not true, ie false

            can be hard to find such, but easy to check to be one

            want to easily show validity
            witness for not validity: counterexample
            witness for validity: (formal) proof

            formal proof is a derived formula, which is obviously valid
            form initial formula by valid rules

            can be difficult to find a proof
            but proof can easil be verified by validity of proof rules

            proof rules are derived from axioms or easy valid formulas

            % TODO: natural deduction calculus
            % or sequent calculus
            % Gentzen, Hilbert
            % TODO: Bruch schreibweise, not iff, only if

            % TODO: free variables

            \subsubsection{Axioms}
                \label{sec:FOL-axioms}


            \subsubsection{Proof Rules}
                \label{sec:FOL-proof-rules}

                sequent is a standard form for logical formulas
                antecedent $\Gamma$ assumed to be true
                succedent $\Delta$ one of these to be shown
                both finite sets of formulas
                $\lsequent{\Gamma}{\Delta}$, which means
                \begin{equation}
                    \landfold{\asfml\in\Gamma}\asfml \limply \lorfold_{\bsfml\in\Delta}\bsfml
                \end{equation}

                comma in antecedent like conjunction, in succedent like disjunction
                rules decompose propositional structure of a formula leading to simpler ones
                %prop logic rules + rules for = and quantifiers

                \paragraph{Universal Quantification Rules}
                    % TODO: forall e <-> forall i
                    eliminates $\forall$
                    $\lforall{x}{\asfml}$ is true if we can replace quantified variable by any term (side condition, $\astrm$ needs be free for x in $\asfml$) and this remains true

                    \begin{calculus}
                        \cinferenceRule[FOLforall|$\forall$]{}{
                            \linferenceRule[sequent]{
                                \subst[\asfml]{x}{\astrm}
                            }{
                                \lforall{x}{\asfml}
                            }
                        }{}
                    \end{calculus}

                    soundness self-evident, since true for all, also for more concrete instance

                    \begin{example}
                        necessity for free

                    \end{example}

                \paragraph{Existential Quantification Rules}
                    % TODO: exists e <-> exists i
                    exists introduction

                    \begin{calculus}
                        \cinferenceRule[FOLexists|$\exists$]{exists generalization rule}{
                            \linferenceRule[sequent]{
                                \lexists{x}{\asfml}
                            }{
                                \subst[\asfml]{x}{\astrm}
                            }
                        }{}
                    \end{calculus}

                    $\astrm$ free for $x$ in $\asfml$
                    can deduce $\lexists{x}{\asfml}$ if we know that true for a concrete instance, witness

            \subsubsection{Ground Proving and Free Variable Proving}
                \label{sec:ground-proving-free-variable-proving}



        \subsection{First-Order Logic of Real Arithmetic}
            \label{sec:FOL-R}

            first-order logic of real arithmetic (\FOLR)
            formula of real arithmetic
            is first order formula
            function/predicate symbols $ = {+,-,\cdot,/,=,<,\leq,>,\geq}$
            constant symbols $\Sigma$
            logical Variables $V$


        % \subsubsection{Substitution}
        % \label{sec:substitution}
        %
        % variables are place holders
        % means of replacing with concrete information
